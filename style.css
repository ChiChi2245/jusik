
@import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');

:root {
    --bg-primary: #121212;
    --bg-sidebar: #1c1c1e;
    --bg-card: #2c2c2e;
    --text-primary: #ffffff;
    --text-secondary: #a0a0a0;
    --accent-color: #0a84ff;
    --border-color: #38383a;
    --shadow-color: rgba(0, 0, 0, 0.3);
    --font-family: 'Pretendard', sans-serif;
}

body[data-theme="light"] {
    --bg-primary: #f4f2ef;
    --bg-sidebar: #ffffff;
    --bg-card: #fdfbfa;
    --text-primary: #1a1a1a;
    --text-secondary: #5c5c5c;
    --accent-color: #1b5bf7;
    --border-color: #e2ddd8;
    --shadow-color: rgba(0, 0, 0, 0.12);
}

html {
    scroll-behavior: smooth;
}

body {
    font-family: var(--font-family);
    background-color: var(--bg-primary);
    color: var(--text-primary);
    margin: 0;
}

/* Scrollbar Styles */
::-webkit-scrollbar { width: 8px; }
::-webkit-scrollbar-track { background: var(--bg-sidebar); }
::-webkit-scrollbar-thumb { background: #555; border-radius: 4px; }
::-webkit-scrollbar-thumb:hover { background: #777; }

.app-container { display: flex; height: 100vh; }

/* --- Sidebar --- */
.sidebar { width: 300px; background-color: var(--bg-sidebar); padding: 24px; display: flex; flex-direction: column; gap: 30px; border-right: 1px solid var(--border-color); overflow-y: auto; }
.sidebar-title { font-size: 24px; font-weight: 700; margin: 0; }
.nav-section { display: flex; flex-direction: column; gap: 16px; }
.nav-title { font-size: 20px; font-weight: 600; margin: 0; }
#search-input { width: 100%; padding: 10px; background-color: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; color: var(--text-primary); font-size: 16px; box-sizing: border-box;}
.filter-buttons { display: flex; }
.filter-buttons button { flex-grow: 1; padding: 10px; background-color: var(--bg-card); border: 1px solid var(--border-color); color: var(--text-secondary); cursor: pointer; font-size: 16px; transition: all 0.2s; }
.filter-buttons button:first-child { border-radius: 8px 0 0 8px; border-right: none; }
.filter-buttons button:last-child { border-radius: 0 8px 8px 0; border-left: none; }
.filter-buttons button.active { background-color: var(--accent-color); color: var(--text-primary); font-weight: 600; border-color: var(--accent-color); }
.dashboard-nav-hidden { display: none !important; }
#back-to-list-btn { background: none; border: 1px solid var(--border-color); color: var(--text-primary); padding: 10px; border-radius: 8px; font-size: 16px; cursor: pointer; text-align: left; margin-bottom: 20px; }
#dashboard-nav-title { margin-bottom: 10px; }
.dashboard-menu { list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 8px; }
.dashboard-menu a { color: var(--text-secondary); text-decoration: none; font-size: 18px; padding: 10px; display: block; border-radius: 6px; }
.dashboard-menu a:hover { background-color: var(--bg-card); }

/* --- Main Content --- */
.main-content { flex-grow: 1; padding: 40px; overflow-y: auto; }
.top-controls { display: flex; gap: 24px; align-items: center; justify-content: space-between; margin-bottom: 20px; flex-wrap: wrap; position: sticky; top: 0; z-index: 10; background: color-mix(in srgb, var(--bg-primary) 92%, transparent); padding: 12px 0; backdrop-filter: blur(6px); }
.top-title { display: flex; flex-direction: column; gap: 4px; min-width: 220px; }
.top-title h2 { margin: 0; font-size: 22px; letter-spacing: -0.2px; }
.top-title p { margin: 0; color: var(--text-secondary); font-size: 14px; }
.sql-toggle-btn { margin-left: auto; border: 1px solid var(--border-color); background: var(--bg-card); color: var(--text-primary); padding: 10px 14px; border-radius: 10px; font-size: 14px; cursor: pointer; }
.sql-toggle-btn:hover { border-color: var(--accent-color); color: var(--accent-color); }
.control-group { display: flex; align-items: center; gap: 12px; background: var(--bg-card); border: 1px solid var(--border-color); padding: 10px 12px; border-radius: 12px; }
.control-label { font-size: 14px; color: var(--text-secondary); }
.segmented-control { display: flex; background: var(--bg-sidebar); border: 1px solid var(--border-color); border-radius: 10px; overflow: hidden; }
.segmented-btn { border: none; background: transparent; color: var(--text-secondary); padding: 8px 12px; font-size: 14px; cursor: pointer; transition: background-color 0.2s, color 0.2s; }
.segmented-btn.active { background: var(--accent-color); color: #fff; font-weight: 600; }
.fx-rate { gap: 10px; }
.fx-value { display: flex; flex-direction: column; gap: 2px; }
#fx-rate { font-weight: 600; font-size: 14px; }
#fx-updated { font-size: 12px; color: var(--text-secondary); }

.sql-editor { background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 12px; padding: 16px; margin-bottom: 20px; }
.sql-editor-header { display: flex; align-items: center; justify-content: space-between; gap: 12px; border-bottom: 1px solid var(--border-color); padding-bottom: 10px; margin-bottom: 12px; }
.sql-editor-header h3 { margin: 0; font-size: 18px; }
.sql-close-btn { border: 1px solid var(--border-color); background: transparent; color: var(--text-secondary); padding: 6px 10px; border-radius: 8px; cursor: pointer; }
.sql-editor-controls { display: flex; gap: 12px; align-items: flex-end; flex-wrap: wrap; margin-bottom: 12px; }
.sql-label { display: flex; flex-direction: column; gap: 6px; font-size: 12px; color: var(--text-secondary); }
.sql-label input { background: var(--bg-sidebar); border: 1px solid var(--border-color); color: var(--text-primary); padding: 8px 10px; border-radius: 8px; min-width: 200px; }
.sql-run-btn { background: var(--accent-color); color: #fff; border: none; padding: 10px 16px; border-radius: 8px; cursor: pointer; font-weight: 600; }
.sql-status { font-size: 12px; color: var(--text-secondary); }
.sql-input { width: 100%; min-height: 160px; background: var(--bg-sidebar); border: 1px solid var(--border-color); color: var(--text-primary); border-radius: 10px; padding: 12px; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size: 13px; }
.sql-editor-monaco { width: 100%; height: 220px; border: 1px solid var(--border-color); border-radius: 10px; overflow: hidden; background: var(--bg-sidebar); }
.sql-error { margin-top: 10px; color: #ff6b6b; font-size: 13px; }
.sql-results { margin-top: 14px; }
.sql-results-meta { font-size: 12px; color: var(--text-secondary); margin-bottom: 8px; }
.sql-results-table { overflow-x: auto; border: 1px solid var(--border-color); border-radius: 10px; }
.sql-results-table table { width: 100%; border-collapse: collapse; font-size: 12px; }
.sql-results-table th, .sql-results-table td { padding: 8px 10px; border-bottom: 1px solid var(--border-color); }
.sql-results-table thead th { background: var(--bg-sidebar); color: var(--text-secondary); position: sticky; top: 0; }

.sql-editor-grid { display: grid; grid-template-columns: minmax(0, 1fr) 260px; gap: 16px; align-items: start; }
.sql-editor-pane { min-width: 0; }
.sql-schema-pane { border: 1px solid var(--border-color); border-radius: 10px; background: var(--bg-sidebar); padding: 10px; max-height: 280px; overflow: auto; }
.sql-schema-header { display: flex; justify-content: space-between; align-items: center; font-size: 12px; color: var(--text-secondary); margin-bottom: 8px; }
.sql-schema-btn { border: 1px solid var(--border-color); background: transparent; color: var(--text-secondary); padding: 4px 8px; border-radius: 6px; cursor: pointer; }
.sql-schema-list { display: flex; flex-direction: column; gap: 6px; font-size: 12px; color: var(--text-secondary); }
.sql-schema-list details { border: 1px solid var(--border-color); border-radius: 8px; padding: 6px 8px; background: var(--bg-card); }
.sql-schema-list summary { cursor: pointer; color: var(--text-primary); font-weight: 600; }
.sql-schema-columns { margin-top: 6px; display: grid; grid-template-columns: 1fr auto; gap: 4px 10px; font-size: 12px; }
.sql-schema-columns span { color: var(--text-secondary); }
.institution-cards-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }
.institution-card { background-color: var(--bg-card); padding: 20px; border-radius: 12px; border: 1px solid var(--border-color); cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; }
.institution-card:hover { transform: translateY(-5px); box-shadow: 0 8px 20px var(--shadow-color); }
.institution-card h3 { margin: 0 0 10px 0; font-size: 18px; }
.institution-card p { margin: 0; color: var(--text-secondary); }
.dashboard-hidden { display: none; }
#dashboard { display: flex; flex-direction: column; gap: 30px; }
.dashboard-row { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 20px; }
.dashboard-half { min-width: 0; }
.dashboard-section { background-color: var(--bg-card); padding: 24px; border-radius: 12px; }
.dashboard-section h3 { font-size: 22px; margin: 0 0 20px 0; padding-bottom: 15px; border-bottom: 1px solid var(--border-color); }
.metric { background: var(--bg-sidebar); padding: 16px; border-radius: 10px; border: 1px solid var(--border-color); min-width: 160px; }
.metric p { margin: 0 0 8px 0; color: var(--text-secondary); }
.metric span { font-size: 22px; font-weight: 700; }
.chart-wrap { height: 260px; max-height: 300px; }
.chart-wrap canvas { height: 100% !important; width: 100% !important; }
.chart-labels { display: flex; flex-direction: column; gap: 8px; margin-top: 12px; }
.label-item { display: grid; grid-template-columns: 10px 1fr auto; align-items: center; gap: 10px; font-size: 13px; color: var(--text-secondary); }
.label-dot { width: 8px; height: 8px; border-radius: 50%; }
.label-name { color: var(--text-primary); }
.label-pct { font-variant-numeric: tabular-nums; }

.table-container { overflow-x: auto; }
table { width: 100%; border-collapse: collapse; }
th, td { text-align: left; padding: 12px 10px; border-bottom: 1px solid var(--border-color); }
thead th { color: var(--text-secondary); font-weight: 600; }

/* --- Detail Panel --- */
.hidden { display: none !important; }
body.panel-open { overflow: hidden; }
.detail-panel-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.7); z-index: 1000; }
.detail-panel { position: fixed; top: 0; right: 0; width: 450px; height: 100%; background-color: var(--bg-sidebar); z-index: 1001; display: flex; flex-direction: column; box-shadow: -10px 0 30px rgba(0,0,0,0.3); transform: translateX(100%); transition: transform 0.3s ease-in-out; }
body.panel-open .detail-panel { transform: translateX(0); }
.panel-header { display: flex; justify-content: space-between; align-items: center; padding: 20px 24px; border-bottom: 1px solid var(--border-color); }
.panel-header h3 { margin: 0; font-size: 20px; }
#panel-close-btn { background: none; border: none; font-size: 24px; color: var(--text-secondary); cursor: pointer; }
.panel-content { padding: 24px; overflow-y: auto; }

@media (max-width: 900px) {
    .sidebar { width: 260px; }
    .top-controls { justify-content: flex-start; }
    .chart-wrap { height: 220px; }
    .dashboard-row { grid-template-columns: 1fr; }
    .sql-toggle-btn { margin-left: 0; }
    .sql-editor-grid { grid-template-columns: 1fr; }
    .sql-schema-pane { max-height: 220px; }
}

@media (max-width: 640px) {
    .app-container { flex-direction: column; height: auto; }
    .sidebar { width: 100%; border-right: none; border-bottom: 1px solid var(--border-color); }
    .main-content { padding: 24px; }
    .chart-wrap { height: 200px; }
}
